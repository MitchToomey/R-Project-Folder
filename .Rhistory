# health data set with less than 1000 hospital beds
health_2 <- filter(health, hosp.beds < 1000)
ggplot(health_2, aes(x=hosp.beds, y=doctors)) +
geom_point() +
geom_smooth(method=lm , color="red", se=FALSE) +
labs(x="Number of Hospital Beds", y="Number of Doctors")
small_city_density <- read_csv(here("Data", "Small Cities Densities.csv"))
check_density <- small_city_density %>%
count(density)
check_density %>%
filter(n > 1)
# I see that 7 rows have more than 1 n, so we need to figure out how to make
# them a primary key
# see if they are accidental duplicates
small_city_density %>%
filter((density == 57 | density == 80 | density == 86 |
density == 95 | density == 106 | density == 108))
# no duplicate city codes, so just diff cities with same density
check_density <- small_city_density %>%
count(city.code, density)
check_density %>%
filter(n > 1)
small_city_density
# I didn't even realize city code was a primary key! But oh well, it got joined.
health <- health %>%
left_join(small_city_density)
health$density_levels <- health$density
health$density_levels[health$density<=79] <- "Low"
health$density_levels[health$density>=80 & health$density<=120 ] <- "Middle"
health$density_levels[health$density>=121] <- "High"
health$density_levels <- as_factor(health$density_levels)
health %>%
mutate(density_levels = fct_relevel(density_levels, "Low", "Middle", "High")) %>%
ggplot(aes(x=density_levels, y=density)) +
geom_bar(stat = "identity") +
scale_fill_manual(values = c("red", "green", "blue")) +
theme(legend.position="none") +
labs(x="Density Levels", y="Number of Cities")
nyc_flights %>%
group_by(carrier) %>%
filter(dest == "ATL") %>%
mutate(on_off_time = (arr_delay >= 0) == TRUE | (arr_delay < 0) == FALSE) %>%
mutate(company = recode(carrier,
"9E" = "Endeavor Air Inc.",
"DL" = "Delta Air Lines Inc.",
"EV" = "ExpressJet Airlines Inc.",
"FL" = "AirTrain Airways Corporation",
"MQ" = "Envoy Air",
"UA" = "United Air Lines Inc.",
"WN" = "Southwest Airlines Co.")) %>%
ggplot(aes(x=fct_rev(company), fill=on_off_time)) +
geom_bar(position = "fill") +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(x="Airlines", y="Proportion Arrived on Time to Atlanta",
fill="on time?")
library(here)
library(tidyverse)
library(dplyr)
library(hrbrthemes)
airlines <- read_csv(here("Data", "Airlines Data.csv"))
nyc_flights <- read_csv(here("Data", "NYC Flights 2013.csv"))
# Joining carriers from carrier data to flights data and renaming
flights_2 <- nyc_flights %>%
left_join(airlines, by = "carrier")
# made a stacked proportional bar plot
flights_2 %>%
group_by(name) %>%
filter(dest == "ATL") %>%
mutate(on_off_time = (arr_delay >= 0) == TRUE | (arr_delay < 0) == FALSE) %>%
ggplot(aes(x=name, fill=on_off_time)) +
geom_bar(position = "fill") +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(x="Airlines", y="Proportion Arrived on Time to Atlanta",
fill="on time?")
# not sure how to remova NA's here
atl_flights <- flights_2 %>%
group_by(carrier) %>%
filter(dest %in% c("ATL")) %>%
summarize(freq = n()) %>%
mutate(carrier = fct_collapse(carrier,
other = c("9E", "UA", "WN"))) %>%
ggplot(aes(x= carrier, y = freq)) +
geom_col(fill = "navy")+
ggtitle("Figure 2. Frequency of Flights to Atlanta (> 500)")
scale_x_discrete(drop = FALSE)
atl_flights
UA <- as_tibble(flights_2) %>%
group_by(name) %>%
filter(name %in% c("United Air Lines Inc."))
AA <- as_tibble(flights_2) %>%
group_by(name) %>%
filter(name %in% c ("American Airlines Inc."))
airports <- read_csv(here("Data", "Airports Data.csv"))
UA_joined<- UA %>%
left_join(airports, c ("dest" = "faa"))
AA_joined<- AA %>%
left_join(airports, c("dest" = "faa"))
UA.only<- setdiff(UA_joined, AA_joined)
UA.only
AA.only<- setdiff(AA_joined, UA_joined)
AA.only
health <- read_csv(here("Data", "Small Cities Health Data.csv"))
health <- as_tibble(health)
ggplot(health, aes(x=hosp.beds, y=doctors)) +
geom_point() +
labs(x="Number of Hospital Beds", y="Number of Doctors")
# health data set with less than 1000 hospital beds
health_2 <- filter(health, hosp.beds < 1000)
ggplot(health_2, aes(x=hosp.beds, y=doctors)) +
geom_point() +
geom_smooth(method=lm , color="red", se=FALSE) +
labs(x="Number of Hospital Beds", y="Number of Doctors")
small_city_density <- read_csv(here("Data", "Small Cities Densities.csv"))
check_density <- small_city_density %>%
count(density)
check_density %>%
filter(n > 1)
# I see that 7 rows have more than 1 n, so we need to figure out how to make
# them a primary key
# see if they are accidental duplicates
small_city_density %>%
filter((density == 57 | density == 80 | density == 86 |
density == 95 | density == 106 | density == 108))
# no duplicate city codes, so just diff cities with same density
check_density <- small_city_density %>%
count(city.code, density)
check_density %>%
filter(n > 1)
small_city_density
# I didn't even realize city code was a primary key! But oh well, it got joined.
health <- health %>%
left_join(small_city_density)
health$density_levels <- health$density
health$density_levels[health$density<=79] <- "Low"
health$density_levels[health$density>=80 & health$density<=120 ] <- "Middle"
health$density_levels[health$density>=121] <- "High"
health$density_levels <- as_factor(health$density_levels)
health %>%
mutate(density_levels = fct_relevel(density_levels, "Low", "Middle", "High")) %>%
ggplot(aes(x=density_levels, y=density)) +
geom_bar(stat = "identity") +
scale_fill_manual(values = c("red", "green", "blue")) +
theme(legend.position="none") +
labs(x="Density Levels", y="Number of Cities")
nyc_flights %>%
group_by(carrier) %>%
filter(dest == "ATL") %>%
mutate(on_off_time = (arr_delay >= 0) == TRUE | (arr_delay < 0) == FALSE) %>%
mutate(company = recode(carrier,
"9E" = "Endeavor Air Inc.",
"DL" = "Delta Air Lines Inc.",
"EV" = "ExpressJet Airlines Inc.",
"FL" = "AirTrain Airways Corporation",
"MQ" = "Envoy Air",
"UA" = "United Air Lines Inc.",
"WN" = "Southwest Airlines Co.")) %>%
ggplot(aes(x=fct_rev(company), fill=on_off_time)) +
geom_bar(position = "fill") +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(x="Airlines", y="Proportion Arrived on Time to Atlanta",
fill="on time?")
library(here)
library(tidyverse)
library(dplyr)
library(hrbrthemes)
library(MASS)
library(lattice)
college_data <- read_csv(here("Data", "College Study Data (Clean).csv"))
johnson_elem <- read_csv(here("Data", "Johnson Elementary ELA Project_Cleaned.csv"))
college_data
# means grouped by gender
college_data %>%
group_by(gender) %>%
summarize(scale1_mean = mean(scale1, na.rm = TRUE),
scale2_mean = mean(scale2, na.rm = TRUE))
# means grouped by class
college_data %>%
group_by(class) %>%
summarize(scale1_mean = mean(scale1, na.rm = TRUE),
scale2_mean = mean(scale2, na.rm = TRUE))
# means groups by class x gender
college_data %>%
group_by(class, gender) %>%
summarize(scale1_mean = mean(scale1, na.rm = TRUE),
scale2_mean = mean(scale2, na.rm = TRUE))
library(readxl)
johnson_elem <- read_excel(here("Data", "Johnson Elementary ELA Project.xlsx"),
skip = 3)
johnson_elem <- rename(johnson_elem, "Room Number" = "...1")
# Fill names of room numbers, separate tardies and absences,
# put quarters into a single quarter variable using a single chain of pipes
johnson_elem <- johnson_elem %>%
fill("Room Number") %>%
filter(!is.na(ID))
library(readxl)
johnson_elem <- read_excel(here("Data", "Johnson Elementary ELA Project.xlsx"),
skip = 3)
johnson_elem <- rename(johnson_elem, "Room Number" = "...1")
# Fill names of room numbers, separate tardies and absences,
# put quarters into a single quarter variable using a single chain of pipes
johnson_elem <- johnson_elem %>%
fill("Room Number") %>%
separate("Tardies; Absences", into = c("Tardies", "Absences")) %>%
gather("1st Quarter", "2nd Quarter", "3rd Quarter", "4th Quarter",
key = "Quarter",
value = "Score")
# check for any problems
problems(johnson_elem)
# making sure it looks okay
johnson_elem
# writing it to a new file
write_csv(johnson_elem, here("Data", "Johnson Elementary ELA Project_Cleaned2.csv"))
flights_2 %>%
group_by(name) %>%
filter(dest == "ATL") %>%
mutate(on_off_time = (arr_delay >= 0) == TRUE | (arr_delay < 0) == FALSE) %>%
ggplot(aes(x=name)) +
geom_bar(aes(fill=on_off_time), position = "fill") +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(x="Airlines", y="Proportion Arrived on Time to Atlanta",
fill="on time?")
flights_2 %>%
group_by(name) %>%
filter(dest == "ATL", !is.na(on_off_time)) %>%
mutate(on_off_time = (arr_delay >= 0) == TRUE | (arr_delay < 0) == FALSE) %>%
ggplot(aes(x=name)) +
geom_bar(aes(fill=on_off_time), position = "fill") +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(x="Airlines", y="Proportion Arrived on Time to Atlanta",
fill="on time?")
flights_2 %>%
group_by(name) %>%
mutate(on_off_time = (arr_delay >= 0) == TRUE | (arr_delay < 0) == FALSE)
flights_2 %>%
group_by(name) %>%
mutate(on_off_time = (arr_delay >= 0) == TRUE | (arr_delay < 0) == FALSE) %>%
filter(dest == "ATL", !is.na(on_off_time)) %>%
ggplot(aes(x=name)) +
geom_bar(aes(fill=on_off_time), position = "fill") +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
labs(x="Airlines", y="Proportion Arrived on Time to Atlanta",
fill="on time?")
atl_flights <- flights_2 %>%
group_by(carrier) %>%
filter(dest %in% c("ATL")) %>%
left_join(airlines, by = "carrier") %>%
summarize(freq = n()) %>%
mutate(carrier = fct_collapse(carrier,
other = c("9E", "UA", "WN"))) %>%
ggplot(aes(x= carrier, y = freq)) +
geom_col(fill = "navy")+
ggtitle("Figure 2. Frequency of Flights to Atlanta (> 500)")
flights_2 %>%
group_by(carrier) %>%
filter(dest %in% c("ATL")) %>%
left_join(airlines, by = "carrier") %>%
summarize(freq = n()) %>%
mutate(carrier = fct_collapse(carrier,
other = c("9E", "UA", "WN"))) %>%
ggplot(aes(x= carrier, y = freq)) +
geom_col(fill = "navy")+
ggtitle("Figure 2. Frequency of Flights to Atlanta (> 500)")
flights_2 %>%
group_by(carrier) %>%
filter(dest %in% c("ATL")) %>%
left_join(airlines, by = "carrier") %>%
summarize(freq = n()) %>%
mutate(carrier = fct_collapse(carrier,
other = c("9E", "UA", "WN"))) %>%
ggplot(aes(x= name, y = freq)) +
geom_col(fill = "navy")+
ggtitle("Figure 2. Frequency of Flights to Atlanta (> 500)")
flights_2 %>%
group_by(carrier) %>%
filter(dest %in% c("ATL")) %>%
left_join(airlines, by = "carrier") %>%
summarize(freq = n()) %>%
mutate(carrier = fct_collapse(carrier,
other = c("9E", "UA", "WN"))) %>%
ggplot(aes(x= name)) +
geom_col(fill = "navy")+
ggtitle("Figure 2. Frequency of Flights to Atlanta (> 500)")
flights_2 %>%
group_by(carrier) %>%
filter(dest %in% c("ATL")) %>%
left_join(airlines, by = "carrier") %>%
summarize(freq = n()) %>%
mutate(carrier = fct_collapse(carrier,
other = c("9E", "UA", "WN"))) %>%
mutate(name = fct_infreq(name)) %>%
ggplot(aes(x = name)) +
geom_bar() +
labs(title = "Carriers from NYC to ATL",
subtitle = "Flight Data from 2013",
x = "Airline Carrier",
y = "Frequency") +
coord_flip()
flights_2 %>%
group_by(carrier) %>%
left_join(airlines, by = "carrier") %>%
filter(dest %in% c("ATL")) %>%
summarize(freq = n()) %>%
mutate(carrier = fct_collapse(carrier,
other = c("9E", "UA", "WN"))) %>%
mutate(name = fct_infreq(name)) %>%
ggplot(aes(x = name)) +
geom_bar() +
labs(title = "Carriers from NYC to ATL",
subtitle = "Flight Data from 2013",
x = "Airline Carrier",
y = "Frequency") +
coord_flip()
View(airlines)
flights %>%
select(carrier, dest) %>%
filter(dest == "ATL") %>%
left_join(airlines, by = "carrier") %>%
mutate(name = fct_lump_min(name, 501)) %>%
mutate(name = fct_infreq(name)) %>%
ggplot(aes(x = name)) +
geom_bar() +
labs(title = "Carriers from NYC to ATL",
subtitle = "Flight Data from 2013",
x = "Airline Carrier",
y = "Frequency") +
coord_flip()
ggplot(health_2, aes(x=hosp.beds, y=doctors)) +
geom_point() +
geom_smooth(method=lm , color="red", se=FALSE) +
labs(title = "Relationship of Physician Numbers to Number of Hospital Beds",
subtitle = "Small Cities in America Data",
x = "Number of Hospital Beds",
y = "Number of Physicians")
flights_2 %>%
select(carrier, dest) %>%
left_join(airlines, by = "carrier") %>%
filter(dest == "ATL") %>%
summarize(freq = n()) %>%
mutate(carrier = fct_collapse(carrier,
other = c("9E", "UA", "WN"))) %>%
mutate(name = fct_infreq(name)) %>%
ggplot(aes(x = name)) +
geom_bar() +
labs(title = "Carriers from NYC to ATL",
subtitle = "Flight Data from 2013",
x = "Airline Carrier",
y = "Frequency") +
coord_flip()
health %>%
mutate(density_levels = fct_relevel(density_levels, "Low", "Middle", "High")) %>%
ggplot(aes(x=density_levels)) +
geom_bar(stat = "identity") +
scale_fill_manual(values = c("red", "green", "blue")) +
theme(legend.position="none") +
labs(x="Density Levels", y="Number of Cities")
health %>%
mutate(density_levels = fct_relevel(density_levels, "Low", "Middle", "High")) %>%
ggplot(aes(x=density_levels)) +
geom_bar() +
scale_fill_manual(values = c("red", "green", "blue")) +
theme(legend.position="none") +
labs(x="Density Levels", y="Number of Cities")
flights_2 %>%
group_by(carrier) %>%
filter(dest == "ATL") %>%
left_join(airlines, by = "carrier") %>%
summarize(freq = n()) %>%
mutate(name = fct_lump_min(name, 501)) %>%
mutate(name = fct_infreq(name)) %>%
ggplot(aes(x = name)) +
geom_bar() +
labs(title = "Carriers from NYC to ATL",
subtitle = "Flight Data from 2013",
x = "Airline Carrier",
y = "Frequency") +
flights_2 %>%
group_by(carrier) %>%
filter(dest == "ATL") %>%
left_join(airlines, by = "carrier") %>%
summarize(freq = n()) %>%
mutate(name = fct_lump_min(name, 501)) %>%
mutate(name = fct_infreq(name)) %>%
ggplot(aes(x = name)) +
geom_bar() +
labs(title = "Carriers from NYC to ATL",
subtitle = "Flight Data from 2013",
x = "Airline Carrier",
y = "Frequency") +
flights %>%
group_by(carrier) %>%
filter(dest == "ATL") %>%
left_join(airlines, by = "carrier") %>%
summarize(freq = n()) %>%
mutate(name = fct_lump_min(name, 501)) %>%
mutate(name = fct_infreq(name)) %>%
ggplot(aes(x = name)) +
geom_bar() +
labs(title = "Carriers from NYC to ATL",
subtitle = "Flight Data from 2013",
x = "Airline Carrier",
y = "Frequency") +
flights_2 %>%
group_by(carrier) %>%
filter(dest == "ATL") %>%
summarize(freq = n()) %>%
mutate(name = fct_lump_min(name, 501)) %>%
mutate(name = fct_infreq(name)) %>%
ggplot(aes(x = name)) +
geom_bar() +
labs(title = "Carriers from NYC to ATL",
subtitle = "Flight Data from 2013",
x = "Airline Carrier",
y = "Frequency") +
flights_2 %>%
group_by(carrier) %>%
filter(dest == "ATL") %>%
summarize(freq = n()) %>%
mutate(name = fct_lump_min(name, 501)) %>%
mutate(name = fct_infreq(name)) %>%
ggplot(aes(x = name)) +
geom_bar() +
labs(title = "Carriers from NYC to ATL",
subtitle = "Flight Data from 2013",
x = "Airline Carrier",
y = "Frequency")
flights_2 %>%
group_by(carrier) %>%
filter(dest %in% c("ATL")) %>%
summarize(freq = n()) %>%
mutate(carrier = fct_collapse(carrier,
other = c("9E", "UA", "WN"))) %>%
ggplot(aes(x= carrier, y = freq)) +
geom_col(fill = "navy")+
scale_x_discrete(drop = FALSE) +
labs(title = "Carriers from NYC to ATL",
subtitle = "Flight Data from 2013",
x = "Airline Carrier",
y = "Frequency") +
flights_2 %>%
group_by(carrier) %>%
filter(dest %in% c("ATL")) %>%
summarize(freq = n()) %>%
mutate(carrier = fct_collapse(carrier,
other = c("9E", "UA", "WN"))) %>%
ggplot(aes(x= carrier, y = freq)) +
geom_col(fill = "navy")+
scale_x_discrete(drop = FALSE) +
labs(title = "Carriers from NYC to ATL",
subtitle = "Flight Data from 2013",
x = "Airline Carrier",
y = "Frequency")
atl_flights <- flights_2 %>%
group_by(carrier) %>%
filter(dest %in% c("ATL")) %>%
summarize(freq = n()) %>%
mutate(carrier = fct_collapse(carrier,
other = c("9E", "UA", "WN"))) %>%
ggplot(aes(x= carrier, y = freq)) +
geom_col(fill = "navy")+
ggtitle("Figure 2. Frequency of Flights to Atlanta (> 500)")
flights_2 %>%
group_by(carrier) %>%
filter(dest %in% c("ATL")) %>%
summarize(freq = n()) %>%
mutate(carrier = fct_collapse(carrier,
other = c("9E", "UA", "WN"))) %>%
ggplot(aes(x= carrier, y = freq)) +
geom_col(fill = "navy")+
scale_x_discrete(drop = FALSE) +
labs(title = "Carriers from NYC to ATL",
subtitle = "Flight Data from 2013",
x = "Airline Carrier",
y = "Frequency")
flights_2 %>%
group_by(carrier) %>%
filter(dest %in% c("ATL")) %>%
summarize(freq = n()) %>%
mutate(carrier = fct_collapse(carrier,
other = c("9E", "UA", "WN"))) %>%
ggplot(aes(x= carrier)) +
geom_col(fill = "navy")+
scale_x_discrete(drop = FALSE) +
labs(title = "Carriers from NYC to ATL",
subtitle = "Flight Data from 2013",
x = "Airline Carrier",
y = "Frequency")
flights_2 %>%
group_by(carrier) %>%
filter(dest %in% c("ATL")) %>%
summarize(freq = n()) %>%
mutate(carrier = fct_collapse(carrier,
other = c("9E", "UA", "WN"))) %>%
ggplot(aes(x= carrier, )) +
geom_col(fill = "navy")+
scale_x_discrete(drop = FALSE) +
labs(title = "Carriers from NYC to ATL",
subtitle = "Flight Data from 2013",
x = "Airline Carrier",
y = "Frequency")
flights_2 %>%
group_by(carrier) %>%
filter(dest %in% c("ATL")) %>%
summarize(freq = n()) %>%
mutate(carrier = fct_collapse(carrier,
other = c("9E", "UA", "WN"))) %>%
ggplot(aes(x= carrier, y = freq)) +
geom_col(fill = "navy")+
scale_x_discrete(drop = FALSE) +
labs(title = "Carriers from NYC to ATL",
subtitle = "Flight Data from 2013",
x = "Airline Carrier",
y = "Frequency")
